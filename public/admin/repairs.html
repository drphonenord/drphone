<!DOCTYPE html><html lang="fr"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Réparations</title>
<style>
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto;background:#0b1222;color:#e5e7eb}
  header{padding:16px 20px;border-bottom:1px solid #1f2937}
  main{max-width:1100px;margin:0 auto;padding:20px}
  input,button{padding:10px 12px;border-radius:10px;border:1px solid #1f2937;background:#0a1020;color:#e5e7eb}
  table{width:100%;border-collapse:collapse;margin-top:12px} th,td{padding:8px;border-bottom:1px solid #1f2937;text-align:left}
</style>
<body>
<header><a href="/admin/dashboard.html" style="color:#93c5fd">← Dashboard</a> | Réparations</header>
<main>
  <div><input id="client" placeholder="Client"> <input id="device" placeholder="Appareil"> <input id="issue" placeholder="Panne"> <button onclick="add()">Ajouter</button></div>
  <table><thead><tr><th>Client</th><th>Appareil</th><th>Panne</th><th>Date</th></tr></thead><tbody id="tb"></tbody></table>
</main>
<script>
  const KEY='drphone_admin_token'; const url='/.netlify/functions/repairs';
  async function load(){ const r=await fetch(url); const d=await r.json(); const tb=document.getElementById('tb'); tb.innerHTML=''; d.forEach(x=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${x.client||''}</td><td>${x.device||''}</td><td>${x.issue||''}</td><td>${x.createdAt||''}</td>`; tb.appendChild(tr); }); }
  async function add(){ const token=localStorage.getItem(KEY)||''; const body={client:document.getElementById('client').value,device:document.getElementById('device').value,issue:document.getElementById('issue').value}; await fetch(url,{method:'POST',headers:{'Content-Type':'application/json','x-admin-token':token},body:JSON.stringify(body)}); document.getElementById('client').value='';document.getElementById('device').value='';document.getElementById('issue').value=''; load(); }
  load();
</script>
</body></html>